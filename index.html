<html>
	<body>
		<canvas id="canvas" width="1366" height="768"/>
		<script>
			var frames = {
				1: 2,
				2: 2,
				3: 2,
				4: 2,
				5: 2,
				6: 2,
				7: 2,
				8: 2,
				9: 2,
				10: 2,
				11: 2,
				12: 2,
				13: 2,
				14: 2,
				15: 2,
				16: 2,
				17: 2,
				18: 2,
				19: 2,
				20: 2,
				21: 2,
				22: 2,
				23: 2,
				24: 2,
				25: 2,
				26: 2,
				27: 2,
				28: 2,
				29: 2,
				30: 2,
				31: 2,
				32: 2,
				33: 2,
				34: 2,
				35: 2,
				36: 2
			}
			var images = {}
			Object.keys(frames).map(f => {
				var image = new Image()
				image.src = `${f}.svg`
				images[f] = image
			})
			var canvas = document.getElementById('canvas')
			var context = canvas.getContext('2d')

			var iterater = (function(){
				var index = 0
				var array = Object.keys(frames).reduce((acc, f) => acc.concat(Array(frames[f] * 2).fill(f)), []).map(i => +i)
				return function(){
					var image = images[array[index % array.length]]
					index++
					return image
				}
			})()
			var animation = function(){
				var scale = 0.8
				var height = 1366
				var width = 768
				context.clearRect(0, 0, 1366, 768)
				context.drawImage(iterater(), 500, 0, height, width, 0, 0, height * scale, width * scale)
				requestAnimationFrame(animation)
			}
			requestAnimationFrame(animation)
		</script>
	</body>
</html>
